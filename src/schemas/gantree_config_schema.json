{
    "$id": "https://flexdapps.com/schemas/gantree_config_schema.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "description": "Schema for Gantree's primary config file",
    "type": "object",
    "properties": {
        "project": {
            "type": "string"
        },
        "repository": {
            "$ref": "#/definitions/repository"
        },
        "validators": {
            "$ref": "#/definitions/validators"
        }
    },
    "required": [
        "project",
        "repository",
        "validators"
    ],
    "definitions": {
        "repository": {
            "type": "object",
            "properties": {
                "url": {
                    "type": "string",
                    "description": "source of repository to build"
                },
                "version": {
                    "type": "string",
                    "description": "version of repository (commit hash)."
                },
                "binaryName": {
                    "type": "string",
                    "description": "name of binary built by rust"
                }
            },
            "required": [
                "url",
                "binaryName"
            ]
        },
        "validators": {
            "type": "object",
            "properties": {
                "nodes": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/node"
                    }
                },
                "telemetryUrl": {
                    "type": "string"
                },
                "loggingFilter": {
                    "type": "string"
                }
            },
            "required": [
                "nodes"
            ]
        },
        "node": {
            "type": "object",
            "required": [
                "provider",
                "machineType",
                "count",
                "zone",
                "sshUser"
            ],
            "properties": {
                "provider": {
                    "type": "string"
                },
                "machineType": {
                    "type": "string"
                },
                "count": {
                    "type": "integer"
                },
                "zone": {
                    "type": "string"
                },
                "sshUser": {
                    "type": "string"
                },
                "location": {
                    "type": "string"
                },
                "projectId": {
                    "type": "string"
                }
            }
        }
    }
}
